[{"type":"yamlHeader","data":{"author":"ryan.edgemon","ms.author":"ryan.edgemon","title":"Materials Documentation - Getting Started","ms.prod":"gaming"}},{"type":"heading","data":"Materials Documentation - Getting Started"},{"type":"other","data":"**Note:** This documentation page assumes the reader is familiar with and has read through creator documentation covering:"},{"type":"other","data":"<TODO: make the following bullets to be links for appropriate sections>"},{"type":"list","data":["JSON Client Entity resources","JSON Entity Texture ---- Molang texture relationship","etc..."]},{"type":"heading","data":"Overview of Materials in Minecraft: Bedrock Edition"},{"type":"other","data":"Materials are used to determine coloring, appearance, or look of an entity or item in Minecraft. Authored, or JSON defined, materials reside within render controllers. Render Controllers can be used to determine what renders on an entity, such as: geometry, materials, and textures."},{"type":"other","data":"When authoring a render controller resource JSON file, each render controller defined in the `\"render_controllers\"` object follows the format of `\"controller.render.<name>\"`. Materials and render controllers objects follow the current Minecraft JSON paradigm: should be lower-case and use underscores instead of spaces in the name."},{"type":"heading","data":"Example of render controller definition"},{"type":"code","data":{"format_version":"1.8.0","render_controllers":{"controller.render.bat":{"geometry":"Geometry.default","materials":[{"*":"Material.default"}],"textures":["Texture.default"]}}},"language":"JSON"},{"type":"other","data":"Entity resource JSON files then reference render controller JSON objects by their defined identifier. The entity's list of render controller references may contain 1 more entries. Each entry must exactly match the name defined in an authored render controller resource file."},{"type":"heading","data":"Example of client entity definition and render controller referencing"},{"type":"code","data":{"format_version":"1.8.0","minecraft:client_entity":{"description":{"identifier":"minecraft:bat","materials":{"default":"bat"},"textures":{"default":"textures/entity/bat"},"geometry":{"default":"geometry.bat"},"render_controllers":["controller.render.bat"]}}},"language":"JSON"},{"type":"heading","data":"Multiple Materials"},{"type":"other","data":"In the above render controller example for the vanilla bat entity, the material friendly-name is a simple identifier. In addition to single identifiers, material arrays can be referenced and indexed, depending on an entity's state. The array holds a collection of friendly-names. The material then becomes more than a simple friendly-name. It becomes a reference to the array, which uses an index to the desired friendly-name in the array."},{"type":"other","data":"In the example below, a different material name is referenced depending on if the spider can be seen or is invisible. If the invisible state is `\"true\"`, then the index evaluates to `1` [ie, the `\"Material.invisible\"` name in the array]. If `\"false\"`, then the index evaluates to `0` (the `\"Material.default\"` name in the array) and the spider will appear as normal."},{"type":"heading","data":"Example Array for materials"},{"type":"code","data":"arrays","language":"JSON"},{"type":"heading","data":"Upgraded Materials"},{"type":"heading","data":"Overview"},{"type":"other","data":"The previous examples presented materials using a format before version <TODO: list version when finalized>. The fundamentals and overview, described above, will still apply with <TODO: version> and going forward. However, leveraging <TODO: version>'s additional features makes for some cool effects. Examples of effects that can be achieved include, but aren't limited to:"},{"type":"list","data":["Change the color of enchantments, or use a complicated texture in place of a single color. Bows could use a shimmering, glowing orange instead of the default vanilla enchanment color, for example.","Add multi-texturing to entities that previously used only one color or texture. So then, chickens could have spots like horses. Or, they could flash different colors when they get close to you--like an exploding creeper. ⚠️Disclaimer⚠️: the chickens do not need to blow up or be harmed in order to make them flash.","Make armor translucent."]},{"type":"other","data":"The idea behind the new enhanced materials with <TODO: version> is to allow the imagination to run wild with how entities appear during Minecraft playtime. However, to use the new enhanced materials system: the version of game being played **must** use the Render Dragon"},{"type":"other","data":"graphics system."},{"type":"heading","data":"New Materials Example"},{"type":"other","data":"In <TODO: version> there is a new JSON object `\"material_input_mapping\"` available for authoring and editing. Sticking with the spider's render controller, it would look like this in <TODO: version>"},{"type":"code","data":"format_version","language":"JSON"},{"type":"heading","data":"Render Dragon Shaders and Shader Input Mapping"},{"type":"other","data":"Render Dragon shaders (dragonfx) can be thought of as little programs which determine the way objects or entities are rendered to appear on screen in Minecraft. Players are not allowed to author new dragonfx files themselves. However, through defining a \"material_input_mapping\" object in an entity's associated render controller--players may define which Render Dragon shader they want an entity to be rendered with. Previous to <TODO: version>, Bedrock Edition entities were hard-coded to always use the same specific shader without the ability to change that shader."},{"type":"other","data":"A list of dragonfx shaders available to players with <TODO: version> can be found [here](https://docs.microsoft.com/en-us/Minecraft/creator/reference/content/materialsreference/examples/renderdragonshaderlist). Each shader contains a list of specific inputs. Each input can be thought of as data to pass to a specific blend or tint operation within its associated shader. Of course,there are exceptions to the blend or tint rule, but most inputs can be thought of as belonging to a blend or tint."},{"type":"other","data":"In the above [\"spider.render_controller.json\"](https://docs.microsoft.com/en-us/Minecraft/creator/reference/content/materialsreference/examples/materialsgettingstarted#new-materials-example) example, the spider's `\"default\"` shader has been defined to use the `\"entity_emissive_alpha\"` Render Dragon shader. Looking at the [shader list](https://docs.microsoft.com/en-us/Minecraft/creator/reference/content/materialsreference/examples/renderdragonshaderlist), `\"entity_emissive_alpha\"` contains 3 inputs. If an input is not defined under its associated shader's JSON identifier, then a vanilla default-value is used for the input."},{"type":"heading","data":"Authoring new render controllers"},{"type":"other","data":"In the root folder of the Resource Pack being added to a Minecraft: Bedrock Edition world, a folder named \"render_controllers\" should exist. If it does not already exist then a new one can be created. Newly authored render controller json files should be placed in this \"render_controllers\" folder. The render controller files in this folder are inteded to override vanilla render controllers."},{"type":"heading","data":"Putting it all together"},{"type":"other","data":"In the [Upgrade Materials - Overview](#overview) section, an example was given that a chicken could be made to flash like a creeper. How can this be achieved? To begin, add a \"material_input_mapping\" object to a newly authored render controller resource file (see [Authoring new render controllers](https://docs.microsoft.com/en-us/Minecraft/creator/reference/content/materialsreference/examples/renderdragonshaderlist/materialsgettingstarted#authoring-new-render-controllers)). The render controller JSON object should appear as follows:"},{"type":"code","data":{"render_controllers":{"format_version":"<TODO: version>","controller.render.chicken":{"geometry":"geometry.default","materials":[{"*":"Material.default"},{"leg*":"Material.legs"}],"material_input_mapping":{},"textures":["texture.default"]}}},"language":"JSON"},{"type":"other","data":"From the documentation in the [shader list](https://docs.microsoft.com/en-us/Minecraft/creator/reference/content/materialsreference/examples/renderdragonshaderlist/renderdragonshaderlist), the `\"entity_alphatest\"` shader cites that vanilla chicken legs use this shader. Naming that shader under a reference object to the `\"legs\"` material, should produce:"},{"type":"code","data":{"render_controllers":{"materials":[{"*":"Material.default"},{"leg*":"Material.legs"}],"material_input_mapping":{"legs":{"entity_alphatest":{"texture.base":"texture.default"}}}}},"language":"JSON"},{"type":"other","data":"How can the chicken body be made to flash? The documentation for the `\"overlay_color\"` input, under `\"entity\"`, in the [shader list](https://docs.microsoft.com/en-us/Minecraft/creator/reference/content/materialsreference/examples/renderdragonshaderlist/renderdragonshaderlist) provides some insight. In the case of the creeper, it's swelling behavior is leveraged to determine when to flash. However, it would be complicated to add swelling behavior to a chicken along with altering the scope of the swelling molang [variables](https://docs.microsoft.com/en-us/minecraft/creator/reference/content/molangreference/examples/molangconcepts/molangintroduction#variables) driving it. Doing so would dilute the focus of this example. There're many, and much more simple conditions to achieve the effect."},{"type":"other","data":"So assuming the player has some familiarity with molang [math](https://docs.microsoft.com/en-us/minecraft/creator/reference/content/molangreference/examples/molangconcepts/molangintroduction#math-functions) and [query](https://docs.microsoft.com/en-us/minecraft/creator/reference/content/molangreference/examples/molangconcepts/queryfunctions#list-of-entity-queries) functions:"},{"type":"code","data":{"render_controllers":{"materials":[{"*":"Material.default"},{"leg*":"Material.legs"}],"material_input_mapping":{"default":{"entity":{"texture.base":"texture.default","overlay_color":["((query.is_moving == 1.0) && (math.mod(query.modified_distance_moved, 4.0) < 2.0)) ? 0.0 : this","((query.is_moving == 1.0) && (math.mod(query.modified_distance_moved, 4.0) < 2.0)) ? 0.0 : this","((query.is_moving == 1.0) && (math.mod(query.modified_distance_moved, 4.0) < 2.0)) ? 1.0 : this","((query.is_moving == 1.0) && (math.mod(query.modified_distance_moved, 4.0) < 2.0)) ? 0.5 : this"]}},"legs":{"entity_alphatest":{"texture.base":"texture.default"}}}}},"language":"JSON"},{"type":"other","data":"Now the flashing effect should kick-in when the chicken is moving, and for every other 2 units of distance moved [ie, overlay the base texture coloring with a half-strength (alpha = 0.5) blue tint every now and then]. When those conditions aren't met, then `\"this\"` is essentially a molang short-hand way of saying: \"use the defaults.\" So, `[ \"this\", \"this\", \"this\", \"this\" ]` is the same as `[ 1.0, 1.0, 1.0, 0,0f ]` for the `\"overlay_color\"` input. Of course, any of the conditions could be different or the flashing rate could be based on a shorter or longer distance. Using the above example's parameters, the effect looks pretty good: [video link?]!"},{"type":"heading","data":"JSON Content Errors"},{"type":"list","data":["If there're any errors or issues with the player's authored JSON for the new `\"material_input_mapping\"` or `\"render_controllers\"`, it'll be noted in the content log.","If an entity's material doesn't get associated with a Render Dragon shader, due to JSON errors or otherwise, then a \"best fit\" attempt will be made to render the material with an appropriate shader. The entity material name and best-fit shader name will be noted in the content log.","If a best-fit can't be made due to too many errors, then the entity's material won't render and will be noted as such in the content log."]}]